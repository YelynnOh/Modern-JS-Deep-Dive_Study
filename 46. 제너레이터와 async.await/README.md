# 46. ì œë„¤ë ˆì´í„°ì™€ async/await

## 1. ì œë„ˆë ˆì´í„°ëž€?

**ì œë„ˆë ˆì´í„°(generator)ëŠ” ì½”ë“œ ë¸”ë¡ì˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€í–ˆë‹¤ê°€ í•„ìš”í•œ ì‹œì ì— ìž¬ê°œí•  ìˆ˜ ìžˆëŠ” íŠ¹ìˆ˜í•œ í•¨ìˆ˜ë‹¤.**

ðŸ“Œ **_ì œë„ˆë ˆì´í„° í•¨ìˆ˜ vs ì¼ë°˜ í•¨ìˆ˜_**
- __ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìžì—ê²Œ í•¨ìˆ˜ ì‹¤í–‰ì˜ ì œì–´ê¶Œ ì–‘ë„ ê°€ëŠ¥__
    - ì¼ë°˜ í•¨ìˆ˜: í•¨ìˆ˜ í˜¸ì¶œìž(caller)ê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ í›„ì—ëŠ” í•¨ìˆ˜ ì‹¤í–‰ì„ ì œì–´ X
    - ì œë„ˆë ˆì´í„° í•¨ìˆ˜: í•¨ìˆ˜ ì‹¤í–‰ì„ í•¨ìˆ˜ í˜¸ì¶œìžê°€ ì œì–´í•  ìˆ˜ ìžˆìœ¼ë©°, í•¨ìˆ˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€í•˜ê±°ë‚˜ ìž¬ê°œí•  ìˆ˜ ìžˆë‹¤. _ì¦‰, í•¨ìˆ˜ì˜ ì œì–´ê¶Œì„ í•¨ìˆ˜ í˜¸ì¶œìžì—ê²Œ ì–‘ë„(yield) ê°€ëŠ¥_
- __ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œìžì™€ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìžˆë‹¤.__
    - ì¼ë°˜ í•¨ìˆ˜: í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ìžˆëŠ” ë™ì•ˆì—ëŠ” í•¨ìˆ˜ ì™¸ë¶€ì—ì„œ í•¨ìˆ˜ ë‚´ë¶€ë¡œ ê°’ì„ ì „ë‹¬í•´ í•¨ìˆ˜ ìƒíƒœ ë³€ê²½ ë¶ˆê°€
    - ì œë„ˆë ˆì´í„° í•¨ìˆ˜: í•¨ìˆ˜ í˜¸ì¶œìžì—ê²Œ ìƒíƒœë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ í•¨ìˆ˜ í˜¸ì¶œìžë¡œë¶€í„° ìƒíƒœ ì „ë‹¬ ë°›ì„ ìˆ˜ë„ ìžˆìŒ
- __ì œë„ˆë ˆì´í„° í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.__
    - ì¼ë°˜ í•¨ìˆ˜: í•¨ìˆ˜ í˜¸ì¶œ ì‹œ í•¨ìˆ˜ ì½”ë“œ ì¼ê´„ ì‹¤í–‰ í›„ ê°’ì„ ë°˜í™˜í•¨
    - ì œë„ˆë ˆì´í„° í•¨ìˆ˜: í•¨ìˆ˜ ì½”ë“œ ì‹¤í–‰ X, ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„ˆë ˆì´í„° ê°ì²´ ë°˜í™˜

## 2. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì •ì˜

1. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” `function *` í‚¤ì›Œë“œë¡œ ì„ ì–¸í•˜ë©° í•˜ë‚˜ ì´ìƒì˜ `yield` í‘œí˜„ì‹ì„ í¬í•¨

```js
//ì œë„ˆë ˆì´í„° í•¨ìˆ˜ ì„ ì–¸ë¬¸
function* getDecFunc(){
    yield 1;
}

//ì œë„ˆë ˆì´í„° í•¨ìˆ˜ í‘œí˜„ì‹
const genExpFunc = function* () {
    yield 1;
};

//ì œë„ˆë ˆì´í„° ë©”ì„œë“œ
const obj = {
    * genObjMethod(){
        yield 1;
    }
}

//ì œë„ˆë ˆì´í„° í´ëž˜ìŠ¤ ë©”ì„œë“œ
class MyClass {
    * genClsMethod(){
        yield 1;
    }
}
```

2. ì• ìŠ¤í„°ë¦¬ìŠ¤í¬(`*`)ì˜ ìœ„ì¹˜ëŠ” `function` í‚¤ì›Œë“œì™€ í•¨ìˆ˜ ì´ë¦„ ì‚¬ì´ì´ë©´ ìƒê´€ì—†ë‹¤. í•˜ì§€ë§Œ ë³´í†µ ì¼ê´€ì„±ì„ ì´ìœ ë¡œ `function` í‚¤ì›Œë“œ ë°”ë¡œ ë’¤ì— ë¶™ì´ëŠ” ê²ƒì„ ê¶Œìž¥. 

```js
//ê¶Œìž¥
function* getFunc() { yield 1; }
```

3. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ì •ì˜ ë¶ˆê°€ëŠ¥

```js
const genArrowFunc = * => {
    yield 1;
}; //SyntaxError: Unexpected token '*'
```

4. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” `new` ì—°ì‚°ìžì™€ í•¨ê»˜ ìƒì„±ìž í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ì—†ìŒ

```js
function * genFunc(){
    yield 1;
}

new genFunc(); //TypeError: genFunc is not a constructor
```

## 3. ì œë„ˆë ˆì´í„° ê°ì²´

__ì œë„ˆë ˆì´í„° í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ì¼ë°˜ í•¨ìˆ˜ì²˜ëŸ¼ í•¨ìˆ˜ ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•œë‹¤. ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ë°˜í™˜í•œ ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ë‹¤.__

ì¦‰, ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” `Symbol.iterator` ë©”ì„œë“œë¥¼ ìƒì†ë°›ëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ `value, done` í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” `next` ë©”ì„œë“œë¥¼ ì†Œìœ í•œ ì´í„°ë ˆì´í„°

ë•Œë¬¸ì— ë”°ë¡œ `Symbol.iterator` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ë³„ë„ë¡œ ì´í„°ë ˆì´í„°ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ìŒ

```js
// ì œë„ˆë ˆì´í„° í•¨ìˆ˜
function* genFunc() {
  yield 1;
  yield 2;
  yield 3;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜
const generator = genFunc();

// ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°
// ì´í„°ëŸ¬ë¸”ì€ Symbol.iterator ë©”ì„œë“œë¥¼ ì§ì ‘ êµ¬í˜„í•˜ê±°ë‚˜ í”„ë¡œí† íƒ€ìž… ì²´ì¸ì„ í†µí•´ ìƒì†ë°›ì€ ê°ì²´ë‹¤.
console.log(Symbol.iterator in generator); // true
// ì´í„°ë ˆì´í„°ëŠ” next ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
console.log('next' in generator) // true
```

__ì´ë•Œ, ì œë„ˆë ˆì´í„°ëŠ” ì´í„°ë ˆì´í„°ì— ì—†ëŠ” `return, throw` ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.__

ðŸ“Œ __ì œë„ˆë ˆì´í„°ì˜ ë©”ì„œë“œ: next, return, throw__

- `next` : ë©”ì„œë“œ í˜¸ì¶œ ì‹œ `yield` í‘œí˜„ì‹ê¹Œì§€ ì½”ë“œ ë¸”ë¡ ì‹¤í–‰ & yieldëœ ê°’ì„ `value` í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ, `false`ë¥¼ `done` í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ ë°˜í™˜
- `return` : ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ê°’ì„ `value` í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ & `true`ë¥¼ `done` í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ ë°˜í™˜
- `throw` : ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ì—ëŸ¬ ë°œìƒ & `undefined`ë¥¼ `value` í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ & `true`ë¥¼ `done` í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ ë°˜í™˜
    ```js
    function genFunc() {
    try {
        yield 1;
        yield 2;
        yield 3;
    } catch (e) {
        console.error(e);
    }
    }

    const generator = genFunc();

    console.log(generator.next()); // {value: 1, done: false}
    console.log(generator.return('End!')); // {value: 'End!', done: return}
    console.log(generator.throw('Error')); // {value: undefined, done: true}
    ```

## 4. ì œë„ˆë ˆì´í„°ì˜ ì¼ì‹œ ì¤‘ì§€ì™€ ìž¬ê°œ

ì œë„ˆë ˆì´í„°ëŠ” `yield` í‚¤ì›Œë“œì™€ `next` ë©”ì„œë“œë¥¼ í†µí•´ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€í–ˆë‹¤ê°€ í•„ìš”í•œ ì‹œì ì— ë‹¤ì‹œ ìž¬ê°œ ê°€ëŠ¥í•¨

__ì œë„ˆë ˆì´í„° ê°ì²´ì˜ `next` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ê²½ìš° ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì½”ë“œ ë¸”ë¡ì´ `yield` í‘œí˜„ì‹ê¹Œì§€ë§Œ ì‹¤í–‰ë¨.__

__`yield` í‚¤ì›Œë“œëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€ì‹œí‚¤ê±°ë‚˜ `yield` í‚¤ì›Œë“œ ë’¤ì— ì˜¤ëŠ” í‘œí˜„ì‹ì˜ í‰ê°€ ê²°ê³¼ë¥¼ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ í˜¸ì¶œìžì—ê²Œ ë°˜í™˜í•¨!__

```js
// ì œë„ˆë ˆì´í„° í•¨ìˆ˜
function* genFunc() {
  yield 1;
  yield 2;
  yield 3;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
// ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” next ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
const generator = genFunc();

// ì²˜ìŒ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
// next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´({value, done})ë¥¼ ë°˜í™˜í•œë‹¤.
// value í”„ë¡œí¼í‹°ì—ëŠ” ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ì—ì„œ yieldëœ ê°’ 1ì´ í• ë‹¹ëœë‹¤.
// done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” falseê°€ í• ë‹¹ëœë‹¤.
console.log(generator.next()); // {value: 1, done: false}

// ë‹¤ì‹œ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
// next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´({value, done})ë¥¼ ë°˜í™˜í•œë‹¤.
// value í”„ë¡œí¼í‹°ì—ëŠ” ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ì—ì„œ yieldëœ ê°’ 2ê°€ í• ë‹¹ëœë‹¤.
// done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” falseê°€ í• ë‹¹ëœë‹¤.
console.log(generator.next()); // {value: 2, done: false}

// ë‹¤ì‹œ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì„¸ ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
// next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´({value, done})ë¥¼ ë°˜í™˜í•œë‹¤.
// value í”„ë¡œí¼í‹°ì—ëŠ” ì„¸ ë²ˆì§¸ yield í‘œí˜„ì‹ì—ì„œ yieldëœ ê°’ 3ì´ í• ë‹¹ëœë‹¤.
// done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” falseê°€ í• ë‹¹ëœë‹¤.
console.log(generator.next()); // {value: 3, done: false}

// ë‹¤ì‹œ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‚¨ì€ yield í‘œí˜„ì‹ì´ ì—†ìœ¼ë¯€ë¡œ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë§ˆì§€ë§‰ê¹Œì§€ ì‹¤í–‰í•œë‹¤.
// next ë©”ì„œë“œëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´({value, done})ë¥¼ ë°˜í™˜í•œë‹¤.
// value í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ undefinedê°€ í• ë‹¹ëœë‹¤.
// done í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆìŒì„ ë‚˜íƒ€ë‚´ëŠ” trueê°€ í• ë‹¹ëœë‹¤.
console.log(generator.next()); // {value: undefined, done: true}

```

ðŸ‘‰ ___ì œë„ˆë ˆì´í„° ê°ì²´ì˜ `next` ë©”ì„œë“œ í˜¸ì¶œì‹œ `yield` í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€(suspend)ë˜ë©°, í•¨ìˆ˜ì˜ ì œì–´ê¶Œì´ í˜¸ì¶œìžë¡œ ì–‘ë„ë¨!___

ì´ë•Œ `next` ë©”ì„œë“œì˜ ë°˜í™˜ ê²°ê³¼ëŠ” _ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´_ ì¸ë°, í•´ë‹¹ ê°ì²´ì˜ _1) `value` í”„ë¡œí¼í‹°ì—ëŠ” `yield` í‘œí˜„ì‹ì—ì„œ `yield` ëœ ê°’(`yield` í‚¤ì›Œë“œ ë’¤ì˜ ê°’)_ ì´ í• ë‹¹ë˜ê³  _2) `done` í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ê°€ ëê¹Œì§€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ ë‚˜íƒ€ë‚´ëŠ” ë¶ˆë¦¬ì–¸ ê°’ í• ë‹¹_

```js
function* genFunc() {
  // ì²˜ìŒ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
  // ì´ë•Œ yieldëœ ê°’ 1ì€ next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì— í• ë‹¹ëœë‹¤.
  // x ë³€ìˆ˜ì—ëŠ” ì•„ì§ ì•„ë¬´ê²ƒë„ í• ë‹¹ë˜ì§€ ì•Šì•˜ë‹¤. x ë³€ìˆ˜ì˜ ê°’ì€ next ë©”ì„œë“œê°€ ë‘ ë²ˆì§¸ í˜¸ì¶œë  ë•Œ ê²°ì •ëœë‹¤.
  const x = yield 1;

  // ë‘ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì „ë‹¬í•œ ì¸ìˆ˜ 10ì€ ì²« ë²ˆì§¸ yield í‘œí˜„ì‹ì„ í• ë‹¹ë°›ëŠ” x ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
  // ì¦‰, const x = yield 1;ì€ ë‘ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ì™„ë£Œëœë‹¤.
  // ë‘ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ê¹Œì§€ ì‹¤í–‰ë˜ê³  ì¼ì‹œ ì¤‘ì§€ëœë‹¤.
  // ì´ë•Œ yieldëœ ê°’ x + 10ì€ next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì— í• ë‹¹ëœë‹¤.
  const y = yield (x + 10);

  // ì„¸ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì „ë‹¬í•œ ì¸ìˆ˜ 20ì€ ë‘ ë²ˆì§¸ yield í‘œí˜„ì‹ì„ í• ë‹¹ë°›ëŠ” y ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
  // ì¦‰, const y = yield (x + 10);ëŠ” ì„¸ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ì™„ë£Œëœë‹¤.
  // ì„¸ ë²ˆì§¸ next ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ í•¨ìˆ˜ ëê¹Œì§€ ì‹¤í–‰ëœë‹¤.
  // ì´ë•Œ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ x + yëŠ” next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì— í• ë‹¹ëœë‹¤.
  // ì¼ë°˜ì ìœ¼ë¡œ ì œë„ˆë ˆì´í„°ì˜ ë°˜í™˜ê°’ì€ ì˜ë¯¸ê°€ ì—†ë‹¤.
  // ë”°ë¼ì„œ ì œë„ˆë ˆì´í„°ì—ì„œëŠ” ê°’ì„ ë°˜í™˜í•  í•„ìš”ê°€ ì—†ê³  returnì€ ì¢…ë£Œì˜ ì˜ë¯¸ë¡œë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
  return x + y;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
// ì´í„°ëŸ¬ë¸”ì´ë©° ë™ì‹œì— ì´í„°ë ˆì´í„°ì¸ ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” next ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤.
const generator = genFunc(0);

// ì²˜ìŒ í˜¸ì¶œí•˜ëŠ” next ë©”ì„œë“œì—ëŠ” ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
// ë§Œì•½ ì²˜ìŒ í˜¸ì¶œí•˜ëŠ” next ë©”ì„œë“œì— ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ë©´ ë¬´ì‹œëœë‹¤.
// next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì—ëŠ” ì²« ë²ˆì§¸ yieldëœ ê°’ 1ì´ í• ë‹¹ëœë‹¤.
let res = generator.next();
console.log(res); // {value: 1, done: false}

// next ë©”ì„œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ 10ì€ genFunc í•¨ìˆ˜ì˜ x ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
// next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì—ëŠ” ë‘ ë²ˆì§¸ yieldëœ ê°’ 20ì´ í• ë‹¹ëœë‹¤.
res = generator.next(10);
console.log(res); // {value: 20, done: false}

// next ë©”ì„œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ 20ì€ genFunc í•¨ìˆ˜ì˜ y ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
// next ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ value í”„ë¡œí¼í‹°ì—ëŠ” ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ 30ì´ í• ë‹¹ëœë‹¤.
res = generator.next(20);
console.log(res); // {value: 30, done: true}
```
ì´ì²˜ëŸ¼ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” `next`ì™€ `yield` í‘œí˜„ì‹ì„ í†µí•´ í•¨ìˆ˜ í˜¸ì¶œìžì™€ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìžˆìŒ

## 5. ì œë„ˆë ˆì´í„°ì˜ í™œìš©

### ì´í„°ëŸ¬ë¸”ì˜ êµ¬í˜„

ì œë„ˆë ˆì´í„° í•¨ìˆ˜ ì‚¬ìš©ì‹œ ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•´ ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” ë°©ì‹ë³´ë‹¤ ê°„ë‹¨ížˆ ì´í„°ëŸ¬ë¸” êµ¬í˜„ ê°€ëŠ¥!

#### ë¬´í•œ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ ìƒì„± í•¨ìˆ˜

- ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œ ì´ìš©
```js
const infiniteFibonacci = (function () {
  let [pre, cur] = [0, 1];
  
  return {
    [Symbol.iterator]() { return this; },
    next() {
      [pre, cur] = [cur, pre + cur];
      // ë¬´í•œ ì´í„°ëŸ¬ë¸”ì´ë¯€ë¡œ done í”„ë¡œí¼í‹° ìƒëžµ
      return { value: cur };
    }
  }
}());

for (const num of infiniteFibonacci) {
  if (num > 10000) break;
  console.log(num); // 1 2 3 5 8 --
}
```


- ì œë„ˆë ˆì´í„° ì´ìš©
```js
// ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œ ì¤€ìˆ˜í•´ ìƒì„±í•˜ëŠ” ë°©ì‹ë³´ë‹¤ ê°„ë‹¨ížˆ êµ¬í˜„í•  ìˆ˜ ìžˆìŒ.
const infiniteFibonacci = (function* () {
  let [pre, cur] = [0, 1];

  while (true) {
    [pre, cur] = [cur, pre + cur];
    yield cur;
  }
}());

for (const num of infiniteFibonacci) {
  if (num > 10000) break;
  console.log(num); // ...
}
```

### ë¹„ë™ê¸° ì²˜ë¦¬ 

`next` ë©”ì„œë“œì™€ `yield` í‘œí˜„ì‹ì„ í†µí•´ í•¨ìˆ˜ í˜¸ì¶œìžì™€ í•¨ìˆ˜ ìƒíƒœë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìžˆë‹¤ëŠ” ì ì—ì„œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì‚¬ìš©í•œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë™ê¸° ì²˜ë¦¬ì²˜ëŸ¼ êµ¬í˜„ ê°€ëŠ¥

## 6. async/await

__í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ì—†ì´ ë§ˆì¹˜ ë™ê¸° ì²˜ëŸ¼ í”„ë¡œë¯¸ìŠ¤ê°€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•  ìˆ˜ ìžˆë„ë¡ í•˜ëŠ” async/awaitê°€ ES8ì—ì„œ ë“±ìž¥í–ˆë‹¤.__

í”„ë¡œë¯¸ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ìž‘í•˜ë©°, í”„ë¡œë¯¸ìŠ¤ì˜ í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ(try/catch/finally) ì—†ì´ ë§ˆì¹˜ ë™ê¸° ì²˜ë¦¬ ì²˜ëŸ¼ í”„ë¡œë¯¸ìŠ¤ê°€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìžˆë‹¤.

```js
const fetch = require('node-fetch');

async function fetchTodo() {
  const url = 'https://jsonplaceholder.typicode.com/todos/1';

  const response = await fetch(url);
  const todo = await response.json();
  console.log(todo);
  // {userId: 1, id: 1, title: 'delectus aut autem', completed: false}
}

fetchTodo();
```

### async í•¨ìˆ˜

- await í‚¤ì›Œë“œëŠ” ë°˜ë“œì‹œ async í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©
- async í•¨ìˆ˜ê°€ ëª…ì‹œì ìœ¼ë¡œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šë”ë¼ë„ async í•¨ìˆ˜ëŠ” ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜ê°’ì„ resolveí•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ ë°˜í™˜

```js
async function foo(n) { return n; }
foo(1).then(v =. console.log(v)); // 1

const bar = async function(n) { return n; }
bar(2).then(v =. console.log(v)); // 2

const baz = async n => n;
baz(3).then(v =. console.log(v)); // 3

const obj = {
  async foo(b) { return n; }
}
obj.foo(4).then(v => console.log(v)); // 4

class MyClass {
  async bar(n) { return n; }
}
const myClass = new MyClass();
myClass.bar(5).then(v => console.log(v)); // 5
```

- í´ëž˜ìŠ¤ì˜ `constructor` ë©”ì„œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•´ì•¼ í•˜ì§€ë§Œ async í•¨ìˆ˜ëŠ” ì–¸ì œë‚˜ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•´ì•¼ í•˜ë¯€ë¡œ `constructor` ë©”ì„œë“œëŠ” async ë©”ì„œë“œê°€ ë  ìˆ˜ ì—†ìŒ!
```js
class MyClass {
    async constructor () { }
    //SyntaxError: Class constructor may not be an async method
}
```

### await í‚¤ì›Œë“œ 

- await í‚¤ì›Œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ settled ìƒíƒœ(_ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ìˆ˜í–‰ëœ ìƒíƒœ_)ê°€ ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ë‹¤ê°€ settled ìƒíƒœê°€ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ ì²˜ë¦¬ ê²°ê³¼ ë°˜í™˜
- await í‚¤ì›Œë“œëŠ” ë°˜ë“œì‹œ í”„ë¡œë¯¸ìŠ¤ ì•žì—ì„œ ì‚¬ìš©í•¨

```js
const fetch = require('node-fetch');

const getGithubUserName = async id => {
  const res = await fetch(`https://api.github.com/users/${id}`); // (1)
  const { name } = await res.json(); // (2)
  console.log(name); // Ungmo Lee
};

getGithubUserName('ungmo2');
```
ðŸ‘‰ await í‚¤ì›Œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ê°€ settled ëœ ìƒíƒœê°€ ë ê¹Œì§€ ê¸°ë‹¤ë¦¬ë¯€ë¡œ (1)ì˜ `fetch` í•¨ìˆ˜ê°€ ìˆ˜í–‰í•œ HTTP ìš”ì²­ì— ëŒ€í•œ ì„œë²„ì˜ ì‘ì´ ë„ì°©í•´ì„œ `fetch` í•¨ìˆ˜ê°€ ë°˜í™˜í•œ í”„ë¡œë¯¸ìŠ¤ê°€ settled ìƒíƒœê°€ ë  ë•Œê¹Œì§€ (1)ì€ ëŒ€ê¸°!

ðŸ‘‰ ì´í›„ _í”„ë¡œë¯¸ìŠ¤ê°€ settled ìƒíƒœê°€ ëœë‹¤ë©´ í”„ë¡œë¯¸ìŠ¤ê°€ resolveí•œ ì²˜ë¦¬ ê²°ê³¼ê°€ res ë³€ìˆ˜ì— í• ë‹¹ > ì´í›„ (2) ì½”ë“œ ì‹¤í–‰_


- ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ì— await í‚¤ì›Œë“œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì£¼ì˜í•´ì•¼ í•¨! ì„œë¡œ ì—°ê´€ì´ ì—†ì´ ê°œë³„ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ì—ì„œëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  í•„ìš”ê°€ ì—†ìŒ. ë§Œì•½ ë¹„ë™ê¸° ì²˜ë¦¬ì˜ ìˆœì„œê°€ ë³´ìž¥ë˜ì–´ì•¼ í•  ë•ŒëŠ” ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ì— await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•¨.
```js
//ìˆœì„œ ë³´ìž¥ ë¶ˆí•„ìš”
async function foo(){
    const res = await Promise.all([
        new Promise(resolve => setTimeout(() => resolve(1), 3000)),
        new Promise(resolve => setTimeout(() => resolve(2), 2000)),
        new Promise(resolve => setTimeout(() => resolve(3), 1000))
    ]);

    console.log(res); //[1, 2, 3]
}

foo(); //ì•½ 3ì´ˆ ì†Œìš”ëœë‹¤.

//ìˆœì„œ ë³´ìž¥ í•„ìš”
async function bar(n) {
  const a = await new Promise(resolve => setTimeout(() => resolve(n), 3000));
  // ë‘ ë²ˆì§¸ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ë ¤ë©´ ì²« ë²ˆì§¸ ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ê°€ í•„ìš”í•˜ë‹¤.
  const b = await new Promise(resolve => setTimeout(() => resolve(a + 1), 2000));
  // ì„¸ ë²ˆì§¸ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ë ¤ë©´ ë‘ ë²ˆì§¸ ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ê°€ í•„ìš”í•˜ë‹¤.
  const c = await new Promise(resolve => setTimeout(() => resolve(b + 1), 1000));

  console.log([a, b, c]); // [1, 2, 3]
}

bar(1); // ì•½ 6ì´ˆ ì†Œìš”ëœë‹¤.
```

### ì—ëŸ¬ ì²˜ë¦¬

- async/awaitì—ì„œ try/catch ë¬¸ì„ ì‚¬ìš©í•´ ì—ëŸ¬ ì²˜ë¦¬ ê°€ëŠ¥
- ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ì™€ëŠ” ë‹¬ë¦¬ í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” ëª…ì‹œì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— í˜¸ì¶œìžê°€ ëª…í™•!
```js
const fetch = require('node-fetch');

const foo = async () => {
  try {
    const wrongUrl = 'https://wrong.url';

    const response = await fetch(wrongUrl);
    const data = await response.json();
    console.log(data);
  } catch (err) {
    console.error(err); // TypeError: Failed to fetch
  }
};

foo();
```
ðŸ‘‰ `foo` í•¨ìˆ˜ì˜ `catch`ë¬¸ì€ HTTP í†µì‹ ì—ì„œ ë°œìƒí•œ ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ë¿ ì•„ë‹ˆë¼ `try` ë¸”ë¡ ë‚´ì˜ ëª¨ë“  ë¬¸ì—ì„œ ë°œìƒí•œ ì¼ë°˜ì ì¸ ì—ëŸ¬ê¹Œì§€ ëª¨ë‘ ìºì¹˜í•  ìˆ˜ ìžˆìŒ

- _async í•¨ìˆ˜ ë‚´ì—ì„œ catchë¬¸ì„ ì‚¬ìš©í•´ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ async í•¨ìˆ˜ëŠ” ë°œìƒí•œ ì—ëŸ¬ë¥¼ rejectí•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ ë°˜í™˜í•¨._ ì´ë•ŒëŠ” `Promise.prototype.catch` í›„ì† ì²˜ë¦¬ ë©”ì„œë“œ ì‚¬ìš©í•´ ì—ëŸ¬ ìºì¹˜ ê°€ëŠ¥
```js
const fetch = require('node-fetch');

const foo = async () => {
  const wrongUrl = 'https://wrong.url';

  const response = await fetch(wrongUrl);
  const data = await response.json();
  return data;
};

foo()
  .then(console.log)
  .catch(console.error); // TypeError: Failed to fetch
```
